<script>
    document.getElementById('year').textContent = new Date().getFullYear().toString();

    // Theme Switcher Logic
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const logo = document.getElementById('header-logo');

    // UI Update Function based on current theme
    function updateThemeUI() {
        const theme = document.documentElement.getAttribute('data-theme');
        if (theme === 'dark') {
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
            if (logo) logo.classList.add('brightness-200');
        } else {
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
            if (logo) logo.classList.remove('brightness-200');
        }
    }

    // Initial UI update (Theme detection handled in head.html)
    updateThemeUI();

    themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeUI();
    });

    // Modal Logic
    function openModal(appId) {
        const modal = document.getElementById('modal');
        if (!modal) return;
        modal.classList.remove('hidden');

        if (appId) {
            const checkbox = document.getElementById('check-' + appId);
            if (checkbox) {
                checkbox.checked = true;
            }
        }
    }

    function closeModal(event) {
        if (event.target === event.currentTarget || event.target.closest('.close-btn')) {
            const modal = document.getElementById('modal');
            if (modal) modal.classList.add('hidden');
        }
    }

    function handleFormSubmit() {
        const modal = document.getElementById('modal');
        const submitBtn = document.getElementById('waitlist-submit');
        if (submitBtn) {
            submitBtn.textContent = 'Subscribed!';
            submitBtn.classList.add('bg-green-600');
        }
        setTimeout(() => {
            if (modal) modal.classList.add('hidden');
        }, 1500);
    }
</script>
